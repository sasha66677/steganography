# Лабораторная работа 1. Представление графической информации в памяти компьютера. Графические форматы. Сжатие графической информации с потерями и без потерь.

## Задания

В этой лабораторной исследуется задача сжатия изображений на примере алгоритма PNG сжатия изображений без потерь, Deflate сжатия любой информации без потерь и JPG сжатия изображений с потерями.

### Задание 1 `(теоретическое)`.

Изучить файл `bike.bmp`, описать использующийся формат изображения, оценить его размеры.

### Задание 2 `(практическое)`.

Средствами библиотеки JIMP реализовать в файле `lab1.ts` функциию `convert`. В качестве аргументов в функцию передаётся имя файла `filename` (изображения `bike.bmp`), а также объект `options` типа `ConversionOptions`. Этот объект может быть одного из 3 видов:

- объект со свойством `format`, равным строке `"png"`
- объект со свойством `format`, равным строке `"deflate"`
- объект со свойством `format`, равным строке`"jpg"`, и с дополнительным свойством `quality` с некоторым числом. В тестах используются значения 99, 90, 75, 50.

В зависимости от `options`, функция `convert` должна осуществлять сжатие в соответствующий формат, и возвращать объект типа `CompressionInfo`, который содержит размер до сжатия `size`, размер после сжатия `compressedSize` и степень сжатия `compressionRatio`.

Конвертированный файл можно представлять в памяти в виде буфера, пример работы с буфером приведен в исходном коде функции `convert`.

Документацию по необходимым методам можно найти в [описании пакета JIMP](https://github.com/oliver-moran/jimp/tree/master/packages/jimp) и [документации к встроенному модулю `zlib` node.js](https://nodejs.org/api/zlib.html#zlib_zlib_deflatesync_buffer_options)

### Задание 3 `(практическое)`.

Реализовать функцию `pngAndDeflate` которая осуществляет конвертацию файла сначала в формат PNG, а затем дополнительно сжимает результат при помощи алгоритма deflate. Аналогично заданию 2, из функции вернуть объект `CompressionInfo` с информацией о размерах и коэффициенте сжатия.

### Задание 4 `(теоретическое)`.

Исследовать итоговые степени сжатия, которые выведутся на консоль после запуска тестов (`npx jest lab1`). Объяснить результаты, полученные в рамках задания 3.

## Контрольные вопросы

1. Опишите постановку задачи сжатия изображений с потерями и без потерь.
2. Приведите примеры известных алгоритмов сжатия без потерь общего назначения.
3. Приведите примеры известных алгоритмов сжатия изображений без потерь.
4. Приведите примеры известных алгоритмов сжатия изображений с потерями.
5. Опишите общие принципы работы алгоритмов сжатия без потерь.
6. Поясните принципы частотных преобразований для изображений.
7. Какой алгоритм сжатия общего назначения лежит в основе формата PNG?
8. Что понимается под цветовой субдискретизацией при сжатии в формате JPEG?
9. Что понимается под базисными изображениями дискретного косинусного преобразования?
10. Для чего в формате JPEG используются матрицы квантования?
11. За счёт чего в формате JPEG достигается сжатие?
12. На каком этапе и для чего в формате JPEG используется кодирование Хаффмана?
13. В чём проявляются видимые искажения при использовании JPEG?
